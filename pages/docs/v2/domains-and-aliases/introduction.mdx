import { withAmp } from 'next/amp'
import Doc from '~/components/layout/docs'
import { TerminalInput } from '~/components/text/terminal'
import { Image, Video } from '~/components/media'
import Caption from '~/components/text/caption'
import Card from '~/components/card'
import Note from '~/components/text/note'
import { GenericLink } from '~/components/text/link'

export const meta = {
  title: 'Introduction to Domains and Aliases',
  description: 'All you need to know about domains on ZEIT Now.',
  editUrl: 'pages/docs/v2/domains-and-aliases/introduction.mdx',
  lastEdited: '2019-03-27T18:40:25.000Z'
}

Domains on ZEIT Now can be used as [aliases](/docs/v2/domains-and-aliases/aliasing-a-deployment/) for your deployments, giving them a public facing name that users can consistently visit to see the latest content, as opposed to [deployment URLs](/docs/v2/deployments/concepts/urls/).

If you do not have a domain with your ZEIT account yet, you can do one of the following:

<Card
  title="Zero-Downtime Domain Migration"
  href="/docs/v2/domains-and-aliases/zero-downtime-domain-migration"
>
  Migrate your domain to use ZEIT DNS with zero downtime.
</Card>

<Card title="Add a Domain" href="/docs/v2/domains-and-aliases/adding-a-domain">
  Multiple ways to add your external domain to your ZEIT account.
</Card>

<Card title="Buy a Domain" href="/docs/v2/domains-and-aliases/buying-a-domain">
  Buying an automatically configured domain to use with ZEIT Now.
</Card>

<Card
  title="Transfer In a Domain"
  href="/docs/v2/domains-and-aliases/transferring-a-domain-in"
>
  Transferring your domain from an external registrar to ZEIT Now.
</Card>

If you have a domain, you can use the following documentation to manage your domain.

## Using Your Domain as an Alias

Now allows you to assign a name to your [deployments](/docs/v2/deployments/basics) by aliasing. Read more about aliasing to use your domains with your deployments:

<Card
  title="Aliasing a Deployment"
  href="/docs/v2/domains-and-aliases/aliasing-a-deployment"
>
  Assign a domain name for your deployments.
</Card>

## Managing Your Domain with Now CLI

The following list of commands can be used with Now CLI to manage domains under your account or a team.

### Listing Your Account or Team's Domains

Using the following command, you can list all added domains under the current context, whether it is your account or a team.

<TerminalInput>{`now domains ls`}</TerminalInput>

### Inspecting A Domain

To get information about your domain from Now, you can use the `now domains inspect` command.

With this command, you can see:

- If your domain is external or using ZEIT DNS.
- When your domain was verified by either TXT record or nameservers.
- The expiry date and when it was bought (if bought with ZEIT).
- If the CDN is enabled.
- If it has a Custom Deployment Suffix assigned.
- How many aliases are assigned with the domain.
- How many certificates the domain has.

  <TerminalInput>{`now domains inspect <domain>`}</TerminalInput>

### Adding a Domain

With the following command, you can assign a domain you already own to your ZEIT account or team:

<TerminalInput>{`now domains add <domain>`}</TerminalInput>

### Removing a Domain

With the following command you can remove a domain that is assigned to your ZEIT account or team:

<TerminalInput>{`now domains rm <domain>`}</TerminalInput>

### Buying a Domain

With the following command you can buy a domain with Now:

<TerminalInput>{`now domains buy <domain>`}</TerminalInput>

<Note>
  Read more in the{' '}
  <GenericLink href="/docs/v2/domains-and-aliases/buying-a-domain">
    Buying a Domain documentation
  </GenericLink>
  .
</Note>

### Transferring a Domain In

With the following command you can transfer a domain in with Now:

<TerminalInput>{`now domains transfer-in <your-domain>`}</TerminalInput>

<Note>
  Read more in the{' '}
  <GenericLink href="/docs/v2/domains-and-aliases/transferring-a-domain-in">
    Transferring a Domain In documentation
  </GenericLink>
  .
</Note>

### Verifying a Domain

With the following command you can force Now to check that your domain is verified by either TXT or Nameservers:

<TerminalInput>{`now domains verify <domain>`}</TerminalInput>

## Transferring a Domain to Another Account

If you want to transfer a domain from one account to another, to a team, or from a team, you are able to do so by first removing the domain from the current account or team and then adding it to the intended account or team.

## Stability and Security

When adding a domain to an account or team, before verifying, Now will provide the intended nameservers for your domain to use. These nameservers are chosen at random to prevent timing attacks where a third-party monitors changes to a domain's nameservers and then attempts to add the domain to their Now account.

This process, however, will require another verification step to be completed.

## FAQ

### Can I point the nameservers of a ZEIT bought domain to another service?

Currently this is not possible but there is active progress in making this possible.

### What is the difference between a ZEIT DNS (or zeit.world) domain and an external domain?

As explained in the "[pointing to Now](/docs/v2/domains-and-aliases/adding-a-domain#step-2:-pointing-to-now)" section:

- ZEIT DNS domains are those that point to the ZEIT DNS nameservers, which allows Now to have greater control and therefore making it easier to automatically manage the domain.
- External domains are those that point to ZEIT through a CNAME record and are harder for Now to automatically manage.

### Can I transfer a domain to another account or team without needing to verify again?

A tool for transferring domains between accounts is in the works and will bypass this need.

export default withAmp(({ children }) => <Doc meta={meta}>{children}</Doc>, {
  hybrid: true
})
