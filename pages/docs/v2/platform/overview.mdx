import { withAmp } from 'next/amp'
import Doc from '~/components/layout/docs'
import { GenericLink } from '~/components/text/link'
import { P } from '~/components/text/paragraph'
import { Image } from '~/components/media'
import Caption from '~/components/text/caption'
import Note from '~/components/text/note'
import { TerminalInput } from '~/components/text/terminal'

export const meta = {
  title: 'Platform Overview',
  description: 'An overview of the Now Platform and the associated versioning.',
  editUrl: 'pages/docs/v2/platform/overview.mdx',
  lastEdited: '2019-01-21T01:10:06.000Z'
}

The Now Platform comprises our API, clients and routing layer. All the individual components are designed to work together in cohesion according to the _platform version_.

## Versioning

There exist two major platform versions of Now:

- **1.0** (**legacy**).
- **2.0** (**default** as of **08-11-2018**).

As of **2.0**, there is no longer a concept of deployment **types**. All deployments can combine static and dynamic serverless entrypoints.

We recommend migrating to v2 for increased performance, security and new features by following our [upgrade guide](/docs/v2/platform/upgrade-to-2-0).

<Note>
  As of the 4th of January 2019, all new users will no longer be able to create
  deployments on the Now 1.0 platform version.
</Note>

## Version Selection

All individual accounts and teams are always automatically on the latest default version of the platform if created on or after 29-10-2018**.**

If you already had an account, we recommend upgrading your default version to **latest** and then specify `version` inside your repositories for perfect future compatibility.

### Team or Account Versioning

In our web dashboard, head to Settings by clicking on your profile picture while logged-in.

<Note>
  please make sure to do this for each <P.B>context</P.B> you are interested in
  selecting a version for (i.e.: individual and/or teams).
</Note>

If you created your account before 29-10-2018, you will be in the **v1 legacy platform**. Otherwise, you'll always be on the **latest** (v2 as of now). We recommend upgrading to v2 once you are confident you have [upgraded your projects](/docs/v2/platform/upgrade-to-2-0) or [pinned them](#per-project-version-pinning) to the corresponding version they are known to work with.

If your account or team is set to the latest, it is still a good idea to always include in `now.json` what version you want your project to be deployed against.

This ensures that as we continue to make improvements to our platform, your workflows are never disrupted.

### Per-project Version Pinning

To maximize predictability and future compliance, we recommend that all your production applications explicitly declare what platform version they are known to work with on `now.json`:

```json
{
  "version": 2
}
```

If you need to quickly set the platform version when deploying a single file (or if you need to test something), you can use this option in [Now CLI](https://zeit.co/download):

<TerminalInput>now --platform-version 2</TerminalInput>

In also comes with a short version:

<TerminalInput>now -V 2</TerminalInput>

If you do not specify a version, [Now CLI](/docs/v2/getting-started/installation#now-cli) and [Now for GitHub](/docs/v2/integrations/now-for-github) will render a warning. If you do not have time to migrate an application to the latest platform version, you can always specify `"version": 1`.

export default withAmp(({ children }) => <Doc meta={meta}>{children}</Doc>, {
  hybrid: true
})
