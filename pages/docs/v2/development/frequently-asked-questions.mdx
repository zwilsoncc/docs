import { withAmp } from 'next/amp'
import Doc from '~/components/layout/docs'
import { TerminalInput } from '~/components/text/terminal'
import { GenericLink } from '~/components/text/link'
import { InlineCode } from '~/components/text/code'
import { Image } from '~/components/media'
import Caption from '~/components/text/caption'
import Card from '~/components/card'

export const meta = {
  title: 'Frequently Asked Questions',
  description: 'Get answers to popular Now Development questions.',
  editUrl: 'pages/docs/v2/development/frequently-asked-questions.mdx',
  lastEdited: '2019-04-30T16:54:39.000Z'
}

This is a list of frequently asked questions related to local development with Now.

All of the questions feature full answers and many contain links to other resources you may find helpful.

Questions can be found under their relevant section header.

### Now + Next.js

##### Why use `now dev` when developing a Next.js app? Why not just run `next dev`?

When you are developing a Next.js application for Now 2.0, the main objective with `now dev` is to imitate our cloud environment.

With that in mind, a few additional steps are necessary before your application can be served in a [Serverless](/docs/v2/deployments/concepts/lambdas/) environment, including the execution of [Builders](/docs/v2/deployments/builders/overview) to optimize your code, proper handling of routes defined in your [`now.json`](/docs/v2/deployments/configuration/) and the loading of [environment variables](/docs/v2/development/environment-variables). `now dev` is a **single command development experience**.

### Supported Builders

##### Which Builders are supported in `now dev`?

The following [Builders](/docs/v2/deployments/builders/overview) are currently supported for use within `now dev`:

- [`@now/static`](/docs/v2/deployments/official-builders/static-now-static)
- [`@now/static-build`](/docs/v2/deployments/official-builders/static-build-now-static-build/)
- [`@now/node`](/docs/v2/deployments/official-builders/node-js-now-node/)
- [`@now/node-server`](/docs/v2/deployments/official-builders/node-js-server-now-node-server/)
- [`@now/next`](/docs/v2/deployments/official-builders/next-js-now-next/)
- [`@now/go`](/docs/v2/deployments/official-builders/go-now-go/)
- [`@now/python`](/docs/v2/deployments/official-builders/python-now-python/)
- [`@now/bash`](/docs/v2/deployments/official-builders/bash-now-bash/)
- [`@now/optipng`](/docs/v2/deployments/official-builders/optipng-now-optipng/)
- [`@now/html-minifier`](/docs/v2/deployments/official-builders/html-minifier-now-html-minifier/)
- [`@now/md`](/docs/v2/deployments/official-builders/markdown-now-md/)

The following Builders are not yet supported but are being worked on and should be available soon:

- [`@now/php`](/docs/v2/deployments/official-builders/php-now-php/)
- [`@now/rust`](/docs/v2/deployments/official-builders/now-rust/)
- [`@now/mdx-deck`](/docs/v2/deployments/official-builders/mdx-deck-now-mdx-deck/)

### Third-party Builders

##### Does `now dev` work with builders that are not in the official list?

While we strongly recommend using our [Official Builders](/docs/v2/deployments/builders/overview), other Builders should work too.

The Official Builders contain optimizations and features specifically aligned with the current release of `now dev`. If your specific use-case isn't working out, please don't hesitate to reach out to us on our [community chat](https://zeit.co/chat) — we'll try our best to help.

### Upgrading

##### How do I upgrade to `now dev`?

Get started by [downloading the Now CLI](/docs/v2/getting-started/installation/#now-cli) or [upgrade your existing installation](/guides/updating-now-cli/) to use `now dev`.

We always recommend running the latest version of the Now CLI. This lets you take advantage of the newest features, stability and security enhancements. To download the Now CLI, visit our download page. To upgrade the Now CLI, [follow the instructions](/guides/updating-now-cli/) in the Upgrade section.

##### I've used Now 1.0 in the past, how do I start using `now dev`?

We encourage you to [upgrade to Now 2.0](/docs/v2/platform/upgrade-to-2-0) in order to take advantage of `now dev`. Upgrading also allows you to enjoy new features, better performance and security, and lower pricing.

Once complete, you can start refactoring your `now.json`. In Now 2.0 we've introduced 2 new configurations:

- `builds`: This is responsible to translate your code into one or more lambdas or static assets. The documentation can be accessed [here](/docs/v2/deployments/configuration/#builds).
- `routes`: By default, the filesystem is used as a router. You can manipulate that behavior with this configuration. The documentation can be accessed [here](/docs/v2/deployments/configuration/#routes).

A look at our [examples](https://github.com/zeit/now-examples) is also recommended, since it is very likely that you can borrow a `now.json` and deploy your app quicker.

### Environment Variables and Secrets

##### Why am I seeing an [environment variables](/docs/v2/development/environment-variables) are not defined in `.env` error when using secrets?

`now dev` does not currently support the use of secrets defined in the [Now CLI](/docs/v2/getting-started/installation/#now-cli). To use [environment variables](/docs/v2/development/environment-variables) with `now dev`, create a `.env` file and add them there as suggested in our [documentation](/docs/v2/development/environment-variables).

##### Why I can’t use `.env` or `.env.build` when deploying?

Your application's security is of paramount importance to us. An unencrypted `.env` file exposes you to a security risk — therefore we do not allow it. Use the [secrets](/docs/v2/deployments/environment-variables-and-secrets/) feature to protect your information by storing your variables safely in the cloud.

##### How do I detect local development or cloud deployment?

Sometimes you need to execute a different code path when your application is running locally compared to when it is running remotely in the cloud. All deployments expose a `NOW_REGION` environment variable which is assigned to the [region](/docs/v2/platform/regions-and-providers) where the [Lambda](/docs/v2/deployments/concepts/lambdas) is currently executing. This value is `dev1` for local development.

### Types of Projects

##### Does `now dev` work for all types of projects?

Yes! `now dev` works for all types of projects using the [Official Builders](/docs/v2/deployments/builders/overview) that can be deployed to [Now](http://now.sh).

### Developing Offline

##### Why doesn’t `now dev` work offline for me?

`now dev` needs to be able to download your project's dependencies before it can continue. If you aren't able to use `now dev` offline, most likely your dependencies haven't been downloaded yet — getting online and running `now dev` again should fix it.

### Getting Help

##### Something isn’t right with `now dev` – who do I reach out to?

Firstly, make sure your Now CLI is up-to-date. If upgrading doesn't fix it for you, you're welcome to ask in our [community chat for help](https://zeit.co/chat), or you can create a new issue in the [now-cli repository](https://github.com/zeit/now-cli).

Someone from the ZEIT team or an experienced member of the community will assist you. For dedicated support learn more about how to [extend your ZEIT experience](https://zeit.co/blog/add-ons) and view our [plan add-ons](https://zeit.co/pricing#addons).

## Read More

Extend your projects with all that Now offers:

<Card title="Deployment" href="/docs/v2/deployments/basics">
  Learn how to deploy your projects with Now.
</Card>

<Card title="Routes" href="/docs/v2/deployments/routes">
  Control your project's paths in detail with routes.
</Card>

<Card title="Builds" href="/docs/v2/deployments/builds">
  Understand how Now handles build steps for you.
</Card>

<Card title="Aliases" href="/docs/v2/domains-and-aliases/aliasing-a-deployment">
  Discover how to generate shareable URL's for your project.
</Card>

<Card title="Support" href="/support">
  Learn more about our Priority Support and setup a Custom Domain Suffix.
</Card>

export default withAmp(({ children }) => <Doc meta={meta}>{children}</Doc>, {
  hybrid: true
})
