import { withAmp } from 'next/amp'
import Doc from '~/components/layout/docs'
import Caption from '~/components/text/caption'
import { InlineCode } from '~/components/text/code'
import Card from '~/components/card'
import Note from '~/components/text/note'
import { P } from '~/components/text/paragraph'

export const meta = {
  title: 'Ignoring Source Paths',
  description:
    'Using a .nowignore file to prevent deploying source paths for speed and security.',
  editUrl: 'pages/docs/v2/deployments/ignoring-source-paths.mdx',
  lastEdited: '2019-05-07T12:36:05.000Z'
}

We highly recommend including the `.nowignore` file in your Now deployment. It is essential in uploading only the required paths to Now, increasing the speed of the initial deployment process.

In this document, you will learn the file's exact function and how to use it.

## What Files Are Uploaded

By default, all files within your project are uploaded (not served, just uploaded) to Now.

In order to prevent a path within your project from being uploaded to Now, you need to create a `.nowignore` file and add the path that you would like to ignore.

The syntax of a `.nowignore` file is exactly the same as a `.gitignore` file (you can find the full specification [here](https://git-scm.com/docs/gitignore#_pattern_format)). As an example, this is how `.nowignore` would look if you wanted to prevent the directories `node_modules` and `dist` from being uploaded:

```
node_modules
dist
```

<Caption>
  An example <InlineCode>.nowignore</InlineCode>file, preventing the{' '}
  <InlineCode>node_modules</InlineCode>and <InlineCode>dist</InlineCode>{' '}
  directories from being uploaded.
</Caption>

We highly recommend taking advantage of this system for ignoring paths, as it will make creating deployments both faster and cheaper.

<Note>
  If you would like to check exactly which files are uploaded, you can do so
  from the <P.B>Source</P.B> tab on the deployment dashboard.
</Note>

## What Files Are Served

Only files that are matched by the `src` property of a **Build** are "considered for serving", the **Builder** you defined decides whether a file is then actually served.

If you did not define a `now.json` file containing one or more **Builds**, however, all files within your project will be served.

The only **exceptions** are `now.json` and `.nowignore`, which will not be served if you did not explicitly define a **Build** with a `src` property that matches their names.

## Read More

See the documentation on **Deployment Basics**, **Builds** and **Builders** to learn more:

<Card title="Deployment Basics" href="/docs/v2/deployments/basics">
  Deploy any of your applications with ZEIT Now.
</Card>

<Card title="Builds" href="/docs/v2/deployments/builds">
  Transform sources into production ready outputs with builds.
</Card>
<Card title="Builders" href="/docs/v2/deployments/builders/overview">
  Choose from a range of existing builders or make your own.
</Card>

export default withAmp(({ children }) => <Doc meta={meta}>{children}</Doc>, {
  hybrid: true
})
